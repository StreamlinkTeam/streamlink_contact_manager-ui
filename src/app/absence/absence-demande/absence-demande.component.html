<body>
<div class="container">
  <mdb-card>
    <mdb-card-header >Demande d'absence {{today | date:'yyyy-MM-dd hh:mm:ss' }} </mdb-card-header>




    <mdb-card-body>

  <div class="row">
    <div class="col border">
      <form #form="ngForm" (ngSubmit)="save(form)" novalidate>
        <div class="form-group required row">
        </div>
        <div class="form-group col-md-10">
          <app-multi-date-picker (datesSelectedChange)="change($event)"
                                 [datesSelected]="datesSelected"></app-multi-date-picker>

          <div class="form-row">

          <div class="form-group col-md-4">
            <label class="col-form-label">Description</label> <input  class="form-control" name="tel3" type="text" required
                                                                      [(ngModel)]="absence.description" />
          </div>

            <div class="form-group col-md-4">
            <label class="col-form-label">Nombre des jours</label> <output class="form-control" [ngModelOptions]="{standalone: true}" [(ngModel)]="absence.sum" >{{datesSelected.length }}  </output>
          </div>

           <!-- <div class="form-group col-md-4">
              <label class="col-form-label">Durée</label>
              <select class="form-control" name="pays" [(ngModel)]="duration">
                <option value="1">Journée</option>
                <option value="0.5">Demi-journée</option>

              </select>
            </div>-->



            <div class="form-group col-md-4">
            <label class="col-form-label">Type d'absence</label>
            <select class="form-control" name="pays"  required [(ngModel)]="type">
              <option value="Maladie">Maladie</option>
            <option value="CP">CP</option>
            <option value="Congé sans solde">Congé sans solde</option>
              <option value="Exceptionnelle">Exceptionnelle</option>
            </select>
          </div>

        </div>




        <div class="form-row">




        </div>
        </div>


        <table class="table table-striped table-sm">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th  scope="col">Date</th>
            <th  scope="col">Type d'absence</th>
            <th  scope="col">Description</th>
            <th  scope="col">Durée</th>
            <!--<th  scope="col">Nombre</th>-->
            <th scope="col">Action </th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let tt of datesSelected; let i=index">
            <td>{{i + 1}}</td>
            <td >{{tt.year}}-{{tt.month}}-{{tt.day}}</td>
            <td>{{type}}</td>
            <td>{{absence.description}}</td>
            <td><mat-form-field>

              <mat-select
                          name="title"
                          (selectionChange)="log($event, i)"
                          required>
                <mat-option  value="1"> Journée </mat-option>
                <mat-option value="0.5"> Demi-journée</mat-option>
              </mat-select>
            </mat-form-field></td>
            <!--<td>{{datesSelected.length }}</td>-->
            <td>
              <button (click)="removeQualification(i)" class="btn btn-sm btn-danger">Delete</button>

            </td>
          </tr>
          </tbody>
        </table>


        <!--<div class="form-row">

          <p-button   class="btn btn-primary fa fa-plus" label="+Ajouter ces périodes d'absences" > </p-button>

        </div>-->


        <div class="form-row">
          <div class="form-group col-md-6">
            <label class="col-form-label">Objet de la demande d'absences</label>
            <input class ="form-control" name="tel3" type="text" required
                   [(ngModel)]="absenceList.subject"/>
          </div>


        </div>

        <div class="form-group">
          <label class="col-form-label">Commentaire</label>
          <textarea class="form-control" [(ngModel)]="absenceList.comment"
                    name="address"  required> </textarea>
        </div>

        <div class="form-group">
          <button class="btn btn-warning" type="submit">Enregistrer</button>

          <button  class="btn btn-secondary" routerLink="/developers" type="reset">Annuler</button>

        </div>

        <div class="note note-info">
          <label> Légende </label>


          <mat-tab-group>
            <mat-tab label="1 étape"> En attente de création </mat-tab>
            <mat-tab label="2 étape">  Enregistré & non validé   </mat-tab>
            <mat-tab label="3 étape"> En attente de validation   </mat-tab>
            <mat-tab label="4 étape"> Validation acceptée </mat-tab>
            <mat-tab label="5 étape"> Validation refusée </mat-tab>

          </mat-tab-group>


        </div>


      </form>
    </div>
  </div>

    </mdb-card-body>

  </mdb-card>
</div>

</body>
